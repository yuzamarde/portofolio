
<!-- Meta Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '487400496389041');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=487400496389041&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->
<style>
    header{
        position: sticky;
        width: 100%;
        background: #ffffff;
        z-index: 50;
        margin-top: 0px;
        box-shadow: 0 .3rem .5rem rgba(0,0,0,.10);
        display: block;
    }
    header .border-bottom {
        border-bottom: 0px solid #dee2e6!important;
        position: fixed;
        width: 100%;
        box-shadow: 0 0.3rem 0.5rem rgb(0 0 0 / 10%);
    }
    .header-main {
        position: relative;
        padding-top: 5px;
        padding-bottom: 5px;
        background-color: #f8f8f8;
    }
    .border-bottom {
        border-bottom: 1px solid #dee2e6!important;
    }
    .col-md-3 {
        -ms-flex: 0 0 25%;
        flex: 0 0 25%;
        max-width: 100%;
        align-self: center;
    }
    .text-decoration-none {
        text-decoration: none!important;
    }
    a {
        color: #000000;
        background-color: transparent;
        text-decoration: none;
    }
    .d-md-block {
        display: block!important;
    }
    .col-md-5 {
        -ms-flex: 0 0 41.666667%;
        flex: 0 0 41.666667%;
        max-width: 41.666667%;
    }
    .col-md-4 {
        -ms-flex: 0 0 33.333333%;
        flex: 0 0 33.333333%;
        max-width: 33.333333%;
    }
    .justify-content-end {
        -ms-flex-pack: end!important;
        justify-content: flex-end!important;
    }
    .d-flex {
        display: flex!important;
        gap: 10px;
    }
    .account .search-button{
        border-radius:.80rem; 
    }
    .cart-header .search-button{
        border-radius:.80rem; 
    }
    .search-button {
        display: inline-block;
        font-weight: 400;
        color: #ffffff;
        text-align: center;
        vertical-align: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        background: linear-gradient( 90deg ,#5b13bb,#520cd4);
        border: 1px solid transparent;
        padding: .375rem .75rem;
        font-size: 1rem;
        line-height: 1.5;
        border-radius: 0 .80rem .80rem 0;
        transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    }
    .form-control {
        display: flex;
        width: 100%;
        height: calc(1.5em + .75rem + 2px);
        padding: .375rem .75rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        background-color: rgb(240, 239, 239);
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: 0.80rem 0 0 0.80rem;
        transition: border-color .15s ease-in-out;box-shadow: .15s ease-in-out;   
        position: relative;
        -ms-flex: 1 1 auto;
        flex: 1 1 auto;
        ;
        min-width: 0;
        margin-bottom: 0;

    }
    .input-group{
        display: flex;
    }
    .input-group-append, .input-group-prepend {
        display: -ms-flexbox;
        display: flex;
    }
    input{
        background-color: #efebeb;
    }
    body .post2 a button {
        background: #32C03C;
        vertical-align: center;
        height: 36px;
        width: 36px;
        border-radius: 10px;
        border-color: white;
        border:0;
        border-radius: 15px 0px 0px 0px !important;
        z-index: 2000;
    }
    body .post2{
        position: fixed;
        right: 0px !important;
        bottom: 0px !important;
        z-index: 2000;
    }
    body .post3 a button {
        background: #FF6600;
        vertical-align: center;
        height: 36px;
        width: 80px;
        border-radius: 10px;
        border-color: white;
        border:0;
        border-radius: 15px 15px 0px 0px !important;
        z-index: 2000;
    }
    body .post3{
        position: fixed;
        right: 155px !important;
        bottom: 0px !important;
        z-index: 2000;
    }
    body .post4 a button {
        background: #1f9900;
        vertical-align: center;
        height: 36px;
        width: 100px;
        border-radius: 10px;
        border-color: white;
        border:0;
        border-radius: 15px 15px 0px 0px !important;
        z-index: 2000;
    }
    body .post4{
        position: fixed;
        right: 45px !important;
        bottom: 0px !important;
        z-index: 2000;
    }
    .search-button {
        color: #f0f0f0;
        background: linear-gradient( 90deg ,#F96C9E,#FB4884);
        border-color: #ffffff;
    }
    @media (min-width: 768px) and (max-width: 1224px)
    {}
    @media (min-width: 270px) and (max-width: 767px)
    {
        body{
            width: 100% !important;
                overflow-x: hidden;
                max-width: 100vw;
                position: absolute;
        }
        div .home .row {
            padding-top: 60px;
        }
        .logo {
            color: #fff;
            font-size: 13px;
            font-weight: 600;
        }
        .container, .container-fluid, .container-lg, .container-md, .container-sm, .container-xl {
            width: 100%;
            padding-right: 15px;
            padding-left: 15px;
            margin-right: auto;
            margin-left: auto;
        }
        .category {
            display: flex;
            flex-direction: row;
            overflow-x: auto;
            padding-left: 0;
            margin-bottom: 0;
            border-radius: .25rem;
        }
        .search{
            display: none !important;
        }
        .col-md-4 {
            flex: 0 0 70%;
            max-width: 70%;
            padding-left: 0px;
            padding-right: 0px;
        }
        .ml-4, .mx-4 {
            margin-left: 0px !important;
        }
        .head-title {
            display: flex;
            justify-content: space-between;
            flex: 1 0 100%;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            margin-right: 0px;
            margin-left: 0px;
            padding-bottom: 0px;
        }
        .rounded {
            border-radius: .25rem!important;
            padding: 0px;
        }
        .title-head{
            padding-left: 0px;
            padding-right: 0px;
        }
        .d-flex {
            display: flex!important;
            gap: 5px;
        }
        
        .search-button{
            padding: 0.3rem 0.4rem;
            font-size: 10px;
        }
        body .post2 a button {
            background: #32C03C;
            vertical-align: center;
            height: 25px;
            width: 25px;
            border-radius: 10px;
            border-color: white;
            border:0;
            border-radius: 15px 0px 0px 0px !important;
            z-index: 2000;
        }
        body .post2 a button .fa{
            font-size: 15px !important;
        }
        body .post2{
            position: fixed;
            right: 0px !important;
            bottom: 0px !important;
            z-index: 2000;
        }
        body .post3 a button {
            background: #FF6600;
            vertical-align: center;
            height: 25px;
            width: 70px;
            border-radius: 10px;
            border-color: white;
            border:0;
            border-radius: 10px 10px 0px 0px !important;
            z-index: 2000;
        }
        body .post3 a button .logo{
            font-size: 10px !important;
        }
        body .post3{
            position: fixed;
            right: 105px !important;
            bottom: 0px !important;
            z-index: 2000;
        }
        body .post4 a button {
            background: #1f9900;
            vertical-align: center;
            height: 25px;
            width: 70px;
            border-radius: 10px;
            border-color: white;
            border:0;
            border-radius: 10px 10px 0px 0px !important;
            z-index: 2000;
        }
        body .post4 a button .logo{
            font-size: 10px !important;
        }
        body .post4{
            position: fixed;
            right: 30px !important;
            bottom: 0px !important;
            z-index: 2000;
        }
        
    }
</style>
<template>
    <header class="section-header">
        <section class="header-main border-bottom">
            <div class="container-fluid">
                <div class="head-title row align-items-center">
                    <div class="title-head col-md-3 col-7">
                        <router-link :to="{name: 'home'}" class="text-decoration-none" data-abc="true">
                            <span class="logo" style="color:#000000;">Mamaneed </span>
                        </router-link>
                    </div>
                    <div class="search col-md-5 d-none d-md-block">
                        <form class="search-wrap">
                            <div class="input-group w-100"><input type="text" class="form-control search-form"
                                    style="width:55%;border: 1px solid #ffffff" name="q"
                                    placeholder="mau beli apa hari ini ?">
                                <div class="input-group-append">
                                    <button class="btn search-button" type="submit"><i class="fa fa-search" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-md-4 col-5">
                        <div class="d-flex justify-content-end">

                            <div class="cart-header">
                                <router-link :to="{name: 'cart'}" class="btn search-button btn-md" style="color: #ffffff;background-color: #6677ef;border-color: #ffffff;"><i class="fa fa-shopping-cart"></i> {{ cartCount }} | Rp. {{ moneyFormat(cartTotal) }} </router-link>
                            </div>

                            <div class="account">
                                <router-link :to="{name: 'login'}" v-if="!isLoggedIn" class="btn search-button btn-md d-none d-md-block ml-4"><i class="fa fa-user-circle"></i> ACCOUNT</router-link>
                                <router-link :to="{name: 'dashboard'}" v-else class="btn search-button btn-md d-none d-md-block ml-4"><i class="fa fa-user"></i> Profile </router-link>      
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="post2">
                <a href="https://api.whatsapp.com/send?phone=+6289627542135&text=Halo">
                    <button >
                    <i class="fa fa-whatsapp" style="font-size:20px;"></i>
                    </button>
                </a>
            </div>
            <div class="post3">
                <a href="https://shopee.co.id/mamaneedssignature?categoryId=100633&itemId=9266250535">
                    <button >
                    <span class="logo" style="font-size:15px;">Shopee </span>
                    </button>
                </a>
            </div>
            <div class="post4">
                <a href="https://www.tokopedia.com/mamaneedsignature?source=universe&st=product">
                    <button >
                    <span class="logo" style="font-size:15px;">Tokopedia </span>
                    </button>
                </a>
            </div>
        </section>
    </header>
</template>

<script>
import { computed, onMounted } from 'vue'
import { useStore } from 'vuex'
    export default {

        setup() {

            //store vuex
            const store = useStore()

            //computed
            const isLoggedIn = computed(() => {

                //get getter "isLoggedIn" dari module "auth"
                return store.getters['auth/isLoggedIn']

            })

            //cart count
            const cartCount = computed(() => {

                //get getter "cartCount" dari module "auth"
                return store.getters['cart/cartCount']
            })

            //cart total
            const cartTotal = computed(() => {

                //get getter "cartTotal" dari module "auth"
                return store.getters['cart/cartTotal']
            })

            //mounted
            onMounted(() => {

                //check state token
                const token = store.state.auth.token

                if(!token) {
                    return
                }

                //saat mounted, akan memanggil action "cartCount" di module "cart"
                store.dispatch('cart/cartCount')

                //saat mounted, akan memanggil action "cartTotal" di module "cart"
                store.dispatch('cart/cartTotal')
            })


            return {
                store,
                isLoggedIn,
                cartTotal,
                cartCount
            }

        }

    }
</script>

